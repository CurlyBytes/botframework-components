# Plugins need a more extensive pipeline to build the projects and publish.
# TODO: NPM pipeline which may result in refactoring this.

stages:
- stage : Prepare
  jobs:
  - job: Prepare
    steps:
    - template: ../tasks/displayEnvironmentVariablesSteps.yml
- stage: Build_pack
  displayName: Build and pack
  dependsOn: []
  jobs:
    - job: Build
      steps:
      - template: ../tasks/useDotNetCore2Steps.yml
      - template: ../tasks/useDotNetCore3Steps.yml
      - template: ../tasks/dotnetRestoreSteps.yml
      - template: ../tasks/dotnetBuildSteps.yml
      - template: ../tasks/copyBinFilesSteps.yml
      - template: ../tasks/dotnetPackSteps.yml
      - template: ../tasks/publishBuildArtifactsNugetSteps.yml
      - template: ../tasks/publishBuildArtifactsBinariesSteps.yml
      - template: ../tasks/debugWorkspaceSteps.yml
